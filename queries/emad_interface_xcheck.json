[
{
  "pk": 30647, 
  "model": "desktop.document2", 
  "fields": {
    "search": "SELECT * from matthew_malcher.emad\n\n/*\n\npublished numbers in the ASC interface dashboard.\nhttps://www.gov.uk/government/publications/local-area-performance-metrics-and-ambitions\nNumbers (with the exception of City of London) match Full Dashboard - Column Q, as published 4 September 2018: https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/737812/nhs-asc-interface-dashboard-aug-2018.ods\n\n*/", 
    "uuid": "882fddd2-f8fc-d18e-ff4c-fc316a5659d0", 
    "extra": "", 
    "type": "query-hive", 
    "description": "Cross check to demonstrate methodology for producing interface dashboard figures using DAE", 
    "is_history": false, 
    "parent_directory": [
      "3de03cd9-86d4-4e33-b6c5-ac56b40ad905", 
      1, 
      false
    ], 
    "is_managed": false, 
    "last_modified": "2019-06-26T05:59:11", 
    "version": 1, 
    "owner": [
      "matthew.malcher"
    ], 
    "dependencies": [], 
    "data": "{\"forceHistoryInitialHeight\": false, \"loadingHistory\": false, \"schedulerViewModel\": null, \"retryModalCancel\": null, \"schedulerViewModelIsLoaded\": false, \"historyTotalPages\": 4, \"unloaded\": false, \"pubSubUrl\": null, \"retryModalConfirm\": null, \"isPresentationMode\": false, \"uuid\": \"882fddd2-f8fc-d18e-ff4c-fc316a5659d0\", \"onSuccessUrl\": null, \"id\": 30647, \"historyFilterVisible\": false, \"historyInitialHeight\": 1680, \"snippets\": [{\"wasBatchExecuted\": false, \"chartLimits\": [5, 10, 25, 50, 100], \"associatedDocumentLoading\": true, \"isReady\": true, \"statement_raw\": \"/* Clear table if query has been run before*/\\n\\ndrop table if exists matthew_malcher.emad;\\n\\n/* \\nCreate table - this is a workaround to enable the user exports.\\nRunning the query in the user exports dialogue does not work, so instead, run this within HUE, then, in the export interface run:\\nselect * from matthew_malcher.emad\\n*/\\ncreate table matthew_malcher.emad as\\n\\nselect \\n    lookup.utla16cd as UTLA,\\n   --(year(admidate)) as yr,\\n   --(month(admidate)) as mth, \\n   (sum(apc.fae)) as fae_sum \\n   \\nfrom hes_apc_1718 as apc\\n\\nleft join matthew_malcher.lt2utla16 as lookup\\n\\n    on apc.resladst_ons = lookup.ltla16cd\\n    \\nwhere apc.classpat = 1 and \\n    apc.admimeth in ('21','22','23','24','25','28','2A','2B','2C','2D') and\\n    apc.fae = 1 and\\n    apc.startage between 65 and 110\\ngroup by \\n    lookup.utla16cd--,\\n    --(year(apc.disdate))--,\\n    --(month(apc.disdate))\\n    \\n;\\n\\nSELECT * from matthew_malcher.emad\\n\\n/*\\nQA Note MM 26/06/19 - this query has effectively been QA'd as you can use it to reproduce the published numbers in the ASC interface dashboard.\\nhttps://www.gov.uk/government/publications/local-area-performance-metrics-and-ambitions\\nNumbers nearly (~+-20 at most for Trafford / Northamptonshire) match Full Dashboard - Column L, as published 4 September 2018: https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/737812/nhs-asc-interface-dashboard-aug-2018.ods\\n*/\", \"statusForButtons\": \"executed\", \"showLogs\": true, \"aceCursorPosition\": {\"column\": 16, \"row\": 39}, \"variableNames\": [], \"associatedDocumentUuid\": null, \"compatibilitySourcePlatform\": \"hive\", \"chartLimit\": null, \"progress\": 0, \"chartType\": \"bars\", \"isFetchingData\": false, \"name\": \"\", \"statementTypes\": [\"text\", \"file\"], \"is_redacted\": false, \"currentQueryTab\": \"savedQueries\", \"chartScope\": \"world\", \"result\": {\"statement_id\": 0, \"isMetaFilterVisible\": false, \"meta\": [], \"logLines\": 0, \"id\": \"224e4035-c921-24eb-0d3c-a2d011610deb\", \"logs\": \"\", \"statements_count\": 1, \"rows\": \"100+\", \"hasSomeResults\": false, \"filteredMetaChecked\": true, \"hasMore\": true, \"filteredMeta\": [], \"type\": \"table\", \"handle\": {\"log_context\": null, \"statements_count\": 1, \"end\": {\"column\": 437, \"row\": 0}, \"statement_id\": 0, \"has_more_statements\": false, \"start\": {\"column\": 0, \"row\": 0}, \"secret\": \"wgwiiNeiSHaoOfq/DIEODg==\\n\", \"has_result_set\": true, \"session_guid\": \"8hNzEcXnTCCl5TO0Xr2hFw==\\n\", \"statement\": \"SELECT * from matthew_malcher.emad\\n\\n/*\\n\\npublished numbers in the ASC interface dashboard.\\nhttps://www.gov.uk/government/publications/local-area-performance-metrics-and-ambitions\\nNumbers (with the exception of City of London) match Full Dashboard - Column Q, as published 4 September 2018: https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/737812/nhs-asc-interface-dashboard-aug-2018.ods\\n\\n*/\", \"operation_type\": 0, \"modified_row_count\": null, \"guid\": \"SOIyc4NTQJe/xdxHDhzBng==\\n\", \"previous_statement_hash\": \"9da7f239ebad622d125b09869a9a5e854f10f6f592d1e7051aecdbac\"}, \"metaFilter\": {\"query\": \"\", \"facets\": {}, \"text\": []}, \"explanation\": \"\", \"statement_range\": {\"start\": {\"column\": 0, \"row\": 0}, \"end\": {\"column\": 0, \"row\": 0}}, \"startTime\": \"2019-06-26T12:34:49.557Z\", \"data\": [], \"previous_statement_hash\": null, \"executionTime\": 3845, \"fetchedOnce\": false, \"hasResultset\": true, \"endTime\": \"2019-06-26T12:34:53.402Z\"}, \"errors\": [], \"chartMapHeat\": null, \"compatibilitySourcePlatforms\": [{\"name\": \"Teradata\", \"value\": \"teradata\"}, {\"name\": \"Oracle\", \"value\": \"oracle\"}, {\"name\": \"Netezza\", \"value\": \"netezza\"}, {\"name\": \"Impala\", \"value\": \"impala\"}, {\"name\": \"Hive\", \"value\": \"hive\"}, {\"name\": \"DB2\", \"value\": \"db2\"}, {\"name\": \"Greenplum\", \"value\": \"greenplum\"}, {\"name\": \"MySQL\", \"value\": \"mysql\"}, {\"name\": \"PostgreSQL\", \"value\": \"postgresql\"}, {\"name\": \"Informix\", \"value\": \"informix\"}, {\"name\": \"SQL Server\", \"value\": \"sqlserver\"}, {\"name\": \"Sybase\", \"value\": \"sybase\"}, {\"name\": \"Access\", \"value\": \"access\"}, {\"name\": \"Firebird\", \"value\": \"firebird\"}, {\"name\": \"ANSISQL\", \"value\": \"ansisql\"}, {\"name\": \"Generic\", \"value\": \"generic\"}], \"aceErrorsHolder\": [], \"showOptimizer\": false, \"compatibilityTargetPlatform\": \"hive\", \"jobs\": [], \"statementType\": \"text\", \"variableValues\": {}, \"isCanceling\": false, \"queriesTotalPages\": 1, \"formatEnabled\": true, \"properties\": {\"files\": [], \"functions\": [], \"arguments\": [], \"settings\": []}, \"aceErrors\": [], \"externalStatementLoaded\": false, \"chartScatterSize\": null, \"chartYSingle\": null, \"suggestion\": \"\", \"statementPath\": \"\", \"showLongOperationWarning\": false, \"chartX\": \"emad.utla\", \"lastExecuted\": 1561552489552, \"variables\": [], \"showChart\": false, \"isResultSettingsVisible\": false, \"showGrid\": true, \"pinnedContextTabs\": [], \"viewSettings\": {\"sqlDialect\": true, \"placeHolder\": \"Example: SELECT * FROM tablename, or press CTRL + space\"}, \"statementsList\": [\"/* Clear table if query has been run before*/\\n\\ndrop table if exists matthew_malcher.emad;\", \"\\n\\n/* \\nCreate table - this is a workaround to enable the user exports.\\nRunning the query in the user exports dialogue does not work, so instead, run this within HUE, then, in the export interface run:\\nselect * from matthew_malcher.emad\\n*/\\ncreate table matthew_malcher.emad as\\n\\nselect \\n    lookup.utla16cd as UTLA,\\n   --(year(admidate)) as yr,\\n   --(month(admidate)) as mth, \\n   (sum(apc.fae)) as fae_sum \\n   \\nfrom hes_apc_1718 as apc\\n\\nleft join matthew_malcher.lt2utla16 as lookup\\n\\n    on apc.resladst_ons = lookup.ltla16cd\\n    \\nwhere apc.classpat = 1 and \\n    apc.admimeth in ('21','22','23','24','25','28','2A','2B','2C','2D') and\\n    apc.fae = 1 and\\n    apc.startage between 65 and 110\\ngroup by \\n    lookup.utla16cd--,\\n    --(year(apc.disdate))--,\\n    --(month(apc.disdate))\\n    \\n;\", \"\\n\\nSELECT * from matthew_malcher.emad\\n\\n/*\\nQA Note MM 26/06/19 - this query has effectively been QA'd as you can use it to reproduce the published numbers in the ASC interface dashboard.\\nhttps://www.gov.uk/government/publications/local-area-performance-metrics-and-ambitions\\nNumbers nearly (~+-20 at most for Trafford / Northamptonshire) match Full Dashboard - Column L, as published 4 September 2018: https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/737812/nhs-asc-interface-dashboard-aug-2018.ods\\n*/\"], \"lastAceSelectionRowOffset\": 34, \"executingBlockingOperation\": null, \"errorsKlass\": \"results hive alert alert-error\", \"statement\": \"\\n\\nSELECT * from matthew_malcher.emad\\n\\n/*\\nQA Note MM 26/06/19 - this query has effectively been QA'd as you can use it to reproduce the published numbers in the ASC interface dashboard.\\nhttps://www.gov.uk/government/publications/local-area-performance-metrics-and-ambitions\\nNumbers nearly (~+-20 at most for Trafford / Northamptonshire) match Full Dashboard - Column L, as published 4 September 2018: https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/737812/nhs-asc-interface-dashboard-aug-2018.ods\\n*/\", \"type\": \"hive\", \"chartSorting\": \"none\", \"previousChartOptions\": {\"chartTimelineType\": \"bar\", \"chartSorting\": \"none\", \"chartLimit\": null, \"chartMapHeat\": null, \"chartX\": \"emad.utla\", \"chartMapType\": \"marker\", \"chartYMulti\": [\"emad.fae_sum\"], \"chartScatterSize\": null, \"chartScope\": \"world\", \"chartMapLabel\": null, \"chartScatterGroup\": null, \"chartYSingle\": null, \"chartXPivot\": null}, \"aceWarningsHolder\": [], \"resultsKlass\": \"results hive\", \"chartTimelineType\": \"bar\", \"compatibilityTargetPlatforms\": [{\"name\": \"Impala\", \"value\": \"impala\"}, {\"name\": \"Hive\", \"value\": \"hive\"}], \"topRisk\": null, \"hasCurlyBracketParameters\": true, \"chartScatterGroup\": null, \"settingsVisible\": false, \"queriesFilterVisible\": false, \"aceAutoExpand\": false, \"aceWarnings\": [], \"compatibilityCheckRunning\": false, \"isLoading\": false, \"loadingQueries\": false, \"hasDataForChart\": true, \"id\": \"8fdf0553-a616-f9fe-0200-d9f01393558d\", \"aceSize\": 100, \"chartData\": [], \"queriesHasErrors\": false, \"chartMapLabel\": null, \"editorMode\": true, \"status\": \"ready\", \"isSqlDialect\": true, \"chartMapType\": \"marker\", \"queriesFilter\": \"\", \"queriesCurrentPage\": 1, \"isBatchable\": true, \"chartYMulti\": [\"emad.fae_sum\"], \"dbSelectionVisible\": false, \"database\": \"hes\", \"hasSuggestion\": null, \"chartXPivot\": null, \"checkStatusTimeout\": null}], \"selectedSnippet\": \"hive\", \"type\": \"query-hive\", \"historyFilter\": \"\", \"description\": \"Cross check to demonstrate methodology for producing interface dashboard figures using DAE\", \"sessions\": [], \"updateHistoryFailed\": false, \"executingAllIndex\": 0, \"presentationSnippets\": {}, \"isBatchable\": true, \"isHistory\": false, \"isPresentationModeDefault\": false, \"initialType\": \"hive\", \"coordinatorUuid\": null, \"name\": \"emad_interface_xcheck\", \"isManaged\": false, \"isExecutingAll\": false, \"isHidingCode\": false, \"loadingScheduler\": false, \"viewSchedulerId\": \"\", \"isSaved\": true, \"historyCurrentPage\": 1, \"creatingSessionLocks\": [], \"directoryUuid\": \"\", \"parentSavedQueryUuid\": \"882fddd2-f8fc-d18e-ff4c-fc316a5659d0\", \"dependentsCoordinator\": []}", 
    "is_trashed": false, 
    "name": "emad_interface_xcheck"
  }
}
]

[
{
  "pk": 30812, 
  "model": "desktop.document2", 
  "fields": {
    "search": "SELECT * from matthew_malcher.los_p90", 
    "uuid": "96a80789-0641-132e-83e1-e26646070589", 
    "extra": "", 
    "type": "query-hive", 
    "description": "", 
    "is_history": false, 
    "parent_directory": [
      "3de03cd9-86d4-4e33-b6c5-ac56b40ad905", 
      1, 
      false
    ], 
    "is_managed": false, 
    "last_modified": "2019-06-26T05:58:58", 
    "version": 1, 
    "owner": [
      "matthew.malcher"
    ], 
    "dependencies": [], 
    "data": "{\"forceHistoryInitialHeight\": false, \"loadingHistory\": false, \"schedulerViewModel\": null, \"retryModalCancel\": null, \"schedulerViewModelIsLoaded\": false, \"historyTotalPages\": 4, \"unloaded\": false, \"pubSubUrl\": null, \"retryModalConfirm\": null, \"isPresentationMode\": false, \"uuid\": \"96a80789-0641-132e-83e1-e26646070589\", \"onSuccessUrl\": null, \"id\": 30812, \"historyFilterVisible\": false, \"historyInitialHeight\": 1680, \"snippets\": [{\"wasBatchExecuted\": false, \"chartLimits\": [5, 10, 25, 50, 100], \"associatedDocumentLoading\": true, \"isReady\": true, \"statement_raw\": \"/* Clear table if query has been run before*/\\n\\ndrop table if exists matthew_malcher.los_p90;\\n\\n/* \\nCreate table - this is a workaround to enable the user exports.\\nRunning the query in the user exports dialogue does not work, so instead, run this within HUE, then, in the export interface run:\\nselect * from matthew_malcher.los_p90\\n*/\\ncreate table matthew_malcher.los_p90 as\\n\\nselect \\n    lookup.utla16cd as UTLA,\\n    (percentile(apc.speldur,0.9)) as los_p90--,\\n    --(year(apc.disdate)) as year,\\n    --(month(apc.disdate)) as month\\nfrom hes_apc_1718 as apc\\nleft join matthew_malcher.lt2utla16 as lookup\\n    on apc.resladst_ons = lookup.ltla16cd\\nwhere \\n    apc.classpat = '1' and\\n    apc.admimeth in ('21','22','23','24','25','28', '2A', '2B', '2C', '2D') and\\n    apc.startage between 65 and 110 and\\n    apc.fde = 1\\ngroup by\\n    lookup.utla16cd--,\\n    --(year(apc.disdate))--,\\n    --(month(apc.disdate))\\n    \\n    ;\\n    \\nSELECT * from matthew_malcher.los_p90\\n\\n/*\\nQA Note MM 26/06/19 - this query has effectively been QA'd as you can use it to reproduce the published numbers in the ASC interface dashboard.\\nhttps://www.gov.uk/government/publications/local-area-performance-metrics-and-ambitions\\nNumbers (with the exception of City of London) match Full Dashboard - Column Q, as published 4 September 2018: https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/737812/nhs-asc-interface-dashboard-aug-2018.ods\\n*/\", \"statusForButtons\": \"executed\", \"showLogs\": true, \"aceCursorPosition\": {\"column\": 0, \"row\": 37}, \"variableNames\": [], \"associatedDocumentUuid\": null, \"compatibilitySourcePlatform\": \"hive\", \"chartLimit\": null, \"progress\": 0, \"chartType\": \"bars\", \"isFetchingData\": false, \"name\": \"\", \"statementTypes\": [\"text\", \"file\"], \"is_redacted\": false, \"currentQueryTab\": \"savedQueries\", \"chartScope\": \"world\", \"result\": {\"statement_id\": 0, \"isMetaFilterVisible\": false, \"meta\": [], \"logLines\": 0, \"id\": \"224e4035-c921-24eb-0d3c-a2d011610deb\", \"logs\": \"\", \"statements_count\": 1, \"rows\": \"175\", \"hasSomeResults\": false, \"filteredMetaChecked\": true, \"hasMore\": false, \"filteredMeta\": [], \"type\": \"table\", \"handle\": {\"log_context\": null, \"statements_count\": 1, \"end\": {\"column\": 42, \"row\": 0}, \"statement_id\": 0, \"has_more_statements\": false, \"start\": {\"column\": 0, \"row\": 0}, \"secret\": \"HC7tLiLTQAqLylMoK9SbJQ==\\n\", \"has_result_set\": true, \"session_guid\": \"8hNzEcXnTCCl5TO0Xr2hFw==\\n\", \"statement\": \"SELECT * from matthew_malcher.los_p90\", \"operation_type\": 0, \"modified_row_count\": null, \"guid\": \"6OlIwGwvSMS+PR+6t8uXxQ==\\n\", \"previous_statement_hash\": \"a91df47bb4af2ce7e60828afb406765e3009a6b2f266a882649e4308\"}, \"metaFilter\": {\"query\": \"\", \"facets\": {}, \"text\": []}, \"explanation\": \"\", \"statement_range\": {\"start\": {\"column\": 0, \"row\": 0}, \"end\": {\"column\": 0, \"row\": 0}}, \"startTime\": \"2019-06-26T12:18:18.412Z\", \"data\": [], \"previous_statement_hash\": null, \"executionTime\": 5176, \"fetchedOnce\": false, \"hasResultset\": true, \"endTime\": \"2019-06-26T12:18:23.588Z\"}, \"errors\": [], \"chartMapHeat\": null, \"compatibilitySourcePlatforms\": [{\"name\": \"Teradata\", \"value\": \"teradata\"}, {\"name\": \"Oracle\", \"value\": \"oracle\"}, {\"name\": \"Netezza\", \"value\": \"netezza\"}, {\"name\": \"Impala\", \"value\": \"impala\"}, {\"name\": \"Hive\", \"value\": \"hive\"}, {\"name\": \"DB2\", \"value\": \"db2\"}, {\"name\": \"Greenplum\", \"value\": \"greenplum\"}, {\"name\": \"MySQL\", \"value\": \"mysql\"}, {\"name\": \"PostgreSQL\", \"value\": \"postgresql\"}, {\"name\": \"Informix\", \"value\": \"informix\"}, {\"name\": \"SQL Server\", \"value\": \"sqlserver\"}, {\"name\": \"Sybase\", \"value\": \"sybase\"}, {\"name\": \"Access\", \"value\": \"access\"}, {\"name\": \"Firebird\", \"value\": \"firebird\"}, {\"name\": \"ANSISQL\", \"value\": \"ansisql\"}, {\"name\": \"Generic\", \"value\": \"generic\"}], \"aceErrorsHolder\": [], \"showOptimizer\": false, \"compatibilityTargetPlatform\": \"hive\", \"jobs\": [], \"statementType\": \"text\", \"variableValues\": {}, \"isCanceling\": false, \"queriesTotalPages\": 1, \"formatEnabled\": true, \"properties\": {\"files\": [], \"functions\": [], \"arguments\": [], \"settings\": []}, \"aceErrors\": [], \"externalStatementLoaded\": false, \"chartScatterSize\": null, \"chartYSingle\": null, \"suggestion\": \"\", \"statementPath\": \"\", \"showLongOperationWarning\": false, \"chartX\": \"los_p90.utla\", \"lastExecuted\": 1561551498406, \"variables\": [], \"showChart\": false, \"isResultSettingsVisible\": false, \"showGrid\": true, \"pinnedContextTabs\": [], \"viewSettings\": {\"sqlDialect\": true, \"placeHolder\": \"Example: SELECT * FROM tablename, or press CTRL + space\"}, \"statementsList\": [\"/* Clear table if query has been run before*/\\n\\ndrop table if exists matthew_malcher.los_p90;\", \"\\n\\n/* \\nCreate table - this is a workaround to enable the user exports.\\nRunning the query in the user exports dialogue does not work, so instead, run this within HUE, then, in the export interface run:\\nselect * from matthew_malcher.los_p90\\n*/\\ncreate table matthew_malcher.los_p90 as\\n\\nselect \\n    lookup.utla16cd as UTLA,\\n    (percentile(apc.speldur,0.9)) as los_p90--,\\n    --(year(apc.disdate)) as year,\\n    --(month(apc.disdate)) as month\\nfrom hes_apc_1718 as apc\\nleft join matthew_malcher.lt2utla16 as lookup\\n    on apc.resladst_ons = lookup.ltla16cd\\nwhere \\n    apc.classpat = '1' and\\n    apc.admimeth in ('21','22','23','24','25','28', '2A', '2B', '2C', '2D') and\\n    apc.startage between 65 and 110 and\\n    apc.fde = 1\\ngroup by\\n    lookup.utla16cd--,\\n    --(year(apc.disdate))--,\\n    --(month(apc.disdate))\\n    \\n    ;\", \"\\n    \\nSELECT * from matthew_malcher.los_p90\\n\\n/*\\nQA Note MM 26/06/19 - this query has effectively been QA'd as you can use it to reproduce the published numbers in the ASC interface dashboard.\\nhttps://www.gov.uk/government/publications/local-area-performance-metrics-and-ambitions\\nNumbers (with the exception of City of London) match Full Dashboard - Column Q, as published 4 September 2018: https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/737812/nhs-asc-interface-dashboard-aug-2018.ods\\n*/\"], \"lastAceSelectionRowOffset\": 31, \"executingBlockingOperation\": null, \"errorsKlass\": \"results hive alert alert-error\", \"statement\": \"\\n    \\nSELECT * from matthew_malcher.los_p90\\n\\n/*\\nQA Note MM 26/06/19 - this query has effectively been QA'd as you can use it to reproduce the published numbers in the ASC interface dashboard.\\nhttps://www.gov.uk/government/publications/local-area-performance-metrics-and-ambitions\\nNumbers (with the exception of City of London) match Full Dashboard - Column Q, as published 4 September 2018: https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/737812/nhs-asc-interface-dashboard-aug-2018.ods\\n*/\", \"type\": \"hive\", \"chartSorting\": \"none\", \"previousChartOptions\": {\"chartTimelineType\": \"bar\", \"chartSorting\": \"none\", \"chartLimit\": null, \"chartMapHeat\": null, \"chartX\": \"los_p90.utla\", \"chartMapType\": \"marker\", \"chartYMulti\": [\"los_p90.los_p90\"], \"chartScatterSize\": null, \"chartScope\": \"world\", \"chartMapLabel\": null, \"chartScatterGroup\": null, \"chartYSingle\": null, \"chartXPivot\": null}, \"aceWarningsHolder\": [], \"resultsKlass\": \"results hive\", \"chartTimelineType\": \"bar\", \"compatibilityTargetPlatforms\": [{\"name\": \"Impala\", \"value\": \"impala\"}, {\"name\": \"Hive\", \"value\": \"hive\"}], \"topRisk\": null, \"hasCurlyBracketParameters\": true, \"chartScatterGroup\": null, \"settingsVisible\": false, \"queriesFilterVisible\": false, \"aceAutoExpand\": false, \"aceWarnings\": [], \"compatibilityCheckRunning\": false, \"isLoading\": false, \"loadingQueries\": false, \"hasDataForChart\": true, \"id\": \"8fdf0553-a616-f9fe-0200-d9f01393558d\", \"aceSize\": 100, \"chartData\": [], \"queriesHasErrors\": false, \"chartMapLabel\": null, \"editorMode\": true, \"status\": \"ready\", \"isSqlDialect\": true, \"chartMapType\": \"marker\", \"queriesFilter\": \"\", \"queriesCurrentPage\": 1, \"isBatchable\": true, \"chartYMulti\": [\"los_p90.los_p90\"], \"dbSelectionVisible\": false, \"database\": \"hes\", \"hasSuggestion\": null, \"chartXPivot\": null, \"checkStatusTimeout\": null}], \"selectedSnippet\": \"hive\", \"type\": \"query-hive\", \"historyFilter\": \"\", \"description\": \"\", \"sessions\": [], \"updateHistoryFailed\": false, \"executingAllIndex\": 0, \"presentationSnippets\": {}, \"isBatchable\": true, \"isHistory\": false, \"isPresentationModeDefault\": false, \"initialType\": \"hive\", \"coordinatorUuid\": null, \"name\": \"los_interface_xcheck\", \"isManaged\": false, \"isExecutingAll\": false, \"isHidingCode\": false, \"loadingScheduler\": false, \"viewSchedulerId\": \"\", \"isSaved\": true, \"historyCurrentPage\": 1, \"creatingSessionLocks\": [], \"directoryUuid\": \"\", \"parentSavedQueryUuid\": \"96a80789-0641-132e-83e1-e26646070589\", \"dependentsCoordinator\": []}", 
    "is_trashed": false, 
    "name": "los_interface_xcheck"
  }
}
]
